<root>

    <!--1. 事件-->

    <!--用户启动用户反馈的时间-->
    <rule name="report">
        <elog tag="am_proc_start" grep="com.miui.bugreport"/>
    </rule>

    <!--实体键事件处理-->
    <rule name="key">
        <log tag="BaseMiuiPhoneWindowManager" grep="keyCode"/>
        <elog grep="key_back_down"/>
    </rule>

    <rule name="notification">
        <elog grep="NOTIFICATION"/>
        <elog tag="sysui_view_visibility" grep="NOTIFICATION_PANEL"/>
    </rule>

    <rule name="screen">
        <elog tag="screen_toggled"/>
    </rule>

    <!--2. bugreport 模块-->

    <rule name="events">
        <elog/>
        <elog tag="am_pss" mute="true"/>
        <elog tag="auditd" mute="true"/>
        <elog tag="chatty" mute="true"/>
    </rule>

    <rule name="log">
        <log/>
        <log tag="chatty" mute="true"/>
    </rule>

    <!--3. 功能模块-->

    <rule name="ams">
        <log tag="ActivityManager" process="system_server"/>
    </rule>

    <rule name="wms">
        <log tag="WindowManager" process="system_server"/>
    </rule>

    <rule name="input">
        <log tag="InputDispatcher"/>
        <log tag="InputReader"/>
        <log tag="InputEventReceiver"/>
        <log grep="Slow Input"/>
        <elog grep="key_back_down"/>
    </rule>

    <rule name="cpu">
        <elog tag="cpu"/>
    </rule>

    <!--4. 进程-->

    <rule name="home">
        <log process="com.miui.home"/>
        <elog process="com.miui.home"/>
        <elog tag="am_pss" mute="true"/>
        <elog tag="auditd" mute="true"/>
        <elog tag="chatty" mute="true"/>
    </rule>

    <rule name="systemui">
        <log process="com.android.systemui"/>
        <elog process="com.android.systemui"/>
        <elog tag="am_pss" mute="true"/>
        <elog tag="auditd" mute="true"/>
        <elog tag="chatty" mute="true"/>
    </rule>

    <rule name="system">
        <log process="system_server"/>
        <elog process="system_server"/>
        <elog tag="am_pss" mute="true"/>
        <elog tag="auditd" mute="true"/>
        <elog tag="chatty" mute="true"/>
        <elog tag="cpu" mute="true"/>
    </rule>

    <!--5. 性能问题-->

    <rule name="lock">
        <elog tag="dvm_lock_sample" process="system_server"/>
    </rule>

    <rule name="slow">
        <elog tag="dvm_lock_sample"/>
        <elog tag="binder_sample"/>
        <elog tag="am_lifecycle_sample"/>
        <elog grep="APP_TRANSITION_DELAY"/>
        <log grep="Slow Operation" />
        <log grep="Slow Input" />
        <log grep="timeout" />
        <log tag="Looper" grep="Dispatch took" />
        <log tag="mmid" mute="true"/>
    </rule>

    <!--6. 关于 perfevent-->

    <!--耗时超过 200ms 的持锁事件-->
    <rule name="lockhold">
        <perfevent type="LockHold" process="system_server" duration="200"/>
    </rule>

    <!--耗时超过 200ms 的 JNI 调用-->
    <rule name="jni">
        <perfevent type="JniMethod" process="system_server" duration="200"/>
    </rule>

    <rule name="duration">
        <perfevent process="system_server" duration="1000"/>
    </rule>

    <rule name="jank">
        <perfevent type="JankRecord"/>
    </rule>


</root>
