<root>

    <!--1. 事件-->

    <!--用户启动用户反馈的时间-->
    <rule name="report">
        <elog tag="am_proc_start" grep="com.miui.bugreport"/>
    </rule>

    <!--实体键事件处理-->
    <rule name="key">
        <log tag="BaseMiuiPhoneWindowManager" grep="keyCode"/>
    </rule>

    <!--2. 模块-->

    <rule name="ams">
        <log tag="ActivityManager" process="system_server"/>
    </rule>

    <rule name="wms">
        <log tag="WindowManager" process="system_server"/>
    </rule>

    <rule name="input">
        <log tag="InputDispatcher"/>
        <log tag="InputReader"/>
        <log tag="InputEventReceiver"/>
        <log grep="Slow Input"/>
        <log tag="Looper" grep="Dispatch took" />
        <log tag="BaseMiuiPhoneWindowManager" grep="keyCode"/>
    </rule>

    <!--3. 进程-->

    <rule name="home">
        <log process="com.miui.home"/>
        <elog process="com.miui.home"/>
    </rule>

    <rule name="systemui">
        <log process="com.android.systemui"/>
        <elog process="com.android.systemui"/>
    </rule>

    <rule name="system">
        <log process="system_server"/>
        <elog process="system_server"/>
    </rule>

    <!--4. 问题-->

    <rule name="lock">
        <elog tag="dvm_lock_sample" process="system_server"/>
    </rule>

    <rule name="slow">
        <elog tag="dvm_lock_sample"/>
        <elog tag="binder_sample"/>
        <elog tag="am_lifecycle_sample"/>
        <log grep="Slow Operation" />
        <log grep="Slow Input" />
        <log grep="timeout" />
        <log tag="Looper" grep="Dispatch took" />
    </rule>

    <!--5. 关于 perfevent-->

    <!--耗时超过 200ms 的持锁事件-->
    <rule name="lockhold">
        <perfevent type="LockHold" process="system_server" duration="200"/>
    </rule>

    <!--耗时超过 200ms 的 JNI 调用-->
    <rule name="jni">
        <perfevent type="JniMethod" process="system_server" duration="200"/>
    </rule>

</root>
